---
description: "cert-manager deployment is unavailable"
alertName: "CertManagerUnavailable"
objective: 95
topic: security
alertLabels:
  cancel_if_any_cluster_control_plane_unhealthy: "true"
  cancel_if_cluster_status_updating: "true"
  cancel_if_cluster_has_no_workers: "true"
  cancel_if_outside_working_hours: "true"
annotations:
  opsrecipe: cert-manager-down/
  description: '{{`cert-manager deployment {{$labels.deployment}} in namespace {{ $labels.namespace }} is unavailable.`}}'
# number of desired cert-manager pods that are down (kube_deployment_status_replicas_unavailable > 0)
errorQuery:  '{{`sum_over_time(kube_deployment_status_replicas_unavailable{namespace="kube-system", deployment=~"cert-manager.*"}[{{.window}}])`}}'
# total number of desired cert-manager pods
totalQuery: '{{`sum_over_time(kube_deployment_status_replicas{namespace="kube-system", deployment=~"cert-manager.*"}[{{.window}}])`}}'

