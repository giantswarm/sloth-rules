---
description: "DaemonSet availability SLO"
alertName: "DaemonSetAvailability"
objective: 90
# number of desired daemonsets pods that are down (kube_daemonset_status_number_unavailable > 0)
errorQuery: '{{`sum_over_time(kube_daemonset_status_number_unavailable{namespace=~"giantswarm|kube-system", daemonset=~"aws-node|aws-cloud-controller-manager|ebs-csi-node|calico-node|cert-exporter|kube-proxy|net-exporter|node-exporter|azure-cloud-controller-manager|azure-cloud-node-manager|azure-scheduled-events|csi-azuredisk-node", provider=~`}}{{ include "cloud.providers" .}}{{`}[{{.window}}])`}}'
# total number of desired daemonsets pods
totalQuery: '{{`sum_over_time(kube_daemonset_status_desired_number_scheduled{namespace=~"giantswarm|kube-system", daemonset=~"aws-node|aws-cloud-controller-manager|ebs-csi-node|calico-node|cert-exporter|kube-proxy|net-exporter|node-exporter|azure-cloud-controller-manager|azure-cloud-node-manager|azure-scheduled-events|csi-azuredisk-node", provider=~`}}{{ include "cloud.providers" .}}{{`}[{{.window}}])`}}'
alertLabels:
  cancel_if_cluster_status_updating: "true"
  cancel_if_prometheus_agent_down: "true"
  cancel_if_outside_working_hours: "true"
